                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.4 #5595 (Oct 23 2013) (Mac OS X ppc)
                              4 ; This file was generated Wed Oct 23 12:25:46 2013
                              5 ;--------------------------------------------------------
                              6 	.module logf
                              7 	.optsdcc -mmcs51 --model-medium
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _logf
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 	.area RSEG    (ABS,DATA)
   0000                      17 	.org 0x0000
                             18 ;--------------------------------------------------------
                             19 ; special function bits
                             20 ;--------------------------------------------------------
                             21 	.area RSEG    (ABS,DATA)
   0000                      22 	.org 0x0000
                             23 ;--------------------------------------------------------
                             24 ; overlayable register banks
                             25 ;--------------------------------------------------------
                             26 	.area REG_BANK_0	(REL,OVR,DATA)
   0000                      27 	.ds 8
                             28 ;--------------------------------------------------------
                             29 ; internal ram data
                             30 ;--------------------------------------------------------
                             31 	.area DSEG    (DATA)
   0000                      32 _logf_tmp:
   0000                      33 	.ds 4
                             34 ;--------------------------------------------------------
                             35 ; overlayable items in internal ram 
                             36 ;--------------------------------------------------------
                             37 	.area OSEG    (OVR,DATA)
                             38 ;--------------------------------------------------------
                             39 ; indirectly addressable internal ram data
                             40 ;--------------------------------------------------------
                             41 	.area ISEG    (DATA)
                             42 ;--------------------------------------------------------
                             43 ; absolute internal ram data
                             44 ;--------------------------------------------------------
                             45 	.area IABS    (ABS,DATA)
                             46 	.area IABS    (ABS,DATA)
                             47 ;--------------------------------------------------------
                             48 ; bit data
                             49 ;--------------------------------------------------------
                             50 	.area BSEG    (BIT)
                             51 ;--------------------------------------------------------
                             52 ; paged external ram data
                             53 ;--------------------------------------------------------
                             54 	.area PSEG    (PAG,XDATA)
                             55 ;--------------------------------------------------------
                             56 ; external ram data
                             57 ;--------------------------------------------------------
                             58 	.area XSEG    (XDATA)
                             59 ;--------------------------------------------------------
                             60 ; absolute external ram data
                             61 ;--------------------------------------------------------
                             62 	.area XABS    (ABS,XDATA)
                             63 ;--------------------------------------------------------
                             64 ; external initialized ram data
                             65 ;--------------------------------------------------------
                             66 	.area XISEG   (XDATA)
                             67 	.area HOME    (CODE)
                             68 	.area GSINIT0 (CODE)
                             69 	.area GSINIT1 (CODE)
                             70 	.area GSINIT2 (CODE)
                             71 	.area GSINIT3 (CODE)
                             72 	.area GSINIT4 (CODE)
                             73 	.area GSINIT5 (CODE)
                             74 	.area GSINIT  (CODE)
                             75 	.area GSFINAL (CODE)
                             76 	.area CSEG    (CODE)
                             77 ;--------------------------------------------------------
                             78 ; global & static initialisations
                             79 ;--------------------------------------------------------
                             80 	.area HOME    (CODE)
                             81 	.area GSINIT  (CODE)
                             82 	.area GSFINAL (CODE)
                             83 	.area GSINIT  (CODE)
                             84 ;--------------------------------------------------------
                             85 ; Home
                             86 ;--------------------------------------------------------
                             87 	.area HOME    (CODE)
                             88 	.area HOME    (CODE)
                             89 ;--------------------------------------------------------
                             90 ; code
                             91 ;--------------------------------------------------------
                             92 	.area CSEG    (CODE)
                             93 ;------------------------------------------------------------
                             94 ;Allocation info for local variables in function 'logf'
                             95 ;------------------------------------------------------------
                             96 ;------------------------------------------------------------
                             97 ;	logf.c:37: float logf(float x)
                             98 ;	-----------------------------------------
                             99 ;	 function logf
                            100 ;	-----------------------------------------
   0000                     101 _logf:
                    0002    102 	ar2 = 0x02
                    0003    103 	ar3 = 0x03
                    0004    104 	ar4 = 0x04
                    0005    105 	ar5 = 0x05
                    0006    106 	ar6 = 0x06
                    0007    107 	ar7 = 0x07
                    0000    108 	ar0 = 0x00
                    0001    109 	ar1 = 0x01
                            110 ;	logf.c:186: __endasm;
                            111 	
                            112 	
                            113 	
                            114 	
                            115 	
                            116 	
                            117 	
   0000 12s00r00            118 	 lcall fsgetarg
   0003                     119 	logf_neg_check:
   0003 30 D1 03            120 	 jnb psw.1, logf_zero_check
                            121 	
   0006 02s00r00            122 	 ljmp fs_return_nan
                            123 	
   0009                     124 	logf_zero_check:
   0009 BC 00 05            125 	 cjne r4, #0, logf_ok
                            126 	
   000C D2 D1               127 	 setb psw.1
   000E 02s00r00            128 	 ljmp fs_return_inf
                            129 	
   0011                     130 	logf_ok:
   0011 C0 82               131 	 push dpl
   0013 74 03               132 	 mov a, #3
   0015 79 00               133 	 mov r1, #0
   0017 12s00r00            134 	 lcall fs_rshift_a
                            135 	
   001A E4                  136 	 clr a
   001B F5*00               137 	 mov (_logf_tmp + 0), a
   001D F5*01               138 	 mov (_logf_tmp + 1), a
   001F F5*02               139 	 mov (_logf_tmp + 2), a
   0021 F5*03               140 	 mov (_logf_tmp + 3), a
   0023 90s00r00            141 	 mov dptr, #__fs_natural_log_table
   0026 F8                  142 	 mov r0, a
   0027                     143 	logf_cordic_loop:
   0027 8C 07               144 	 mov ar7, r4
   0029 8B 06               145 	 mov ar6, r3
   002B 8A 05               146 	 mov ar5, r2
   002D 89 F0               147 	 mov b, r1
   002F E8                  148 	 mov a, r0
   0030 12s00r00            149 	 lcall __fs_cordic_rshift_r765_unsigned
   0033 E9                  150 	 mov a, r1
   0034 25 F0               151 	 add a, b
   0036 EA                  152 	 mov a, r2
   0037 3D                  153 	 addc a, r5
   0038 EB                  154 	 mov a, r3
   0039 3E                  155 	 addc a, r6
   003A EC                  156 	 mov a, r4
   003B 3F                  157 	 addc a, r7
   003C 54 E0               158 	 anl a, #0xE0
   003E 70 28               159 	 jnz logf_cordic_skip
   0040 E9                  160 	 mov a, r1
   0041 25 F0               161 	 add a, b
   0043 F9                  162 	 mov r1, a
   0044 EA                  163 	 mov a, r2
   0045 3D                  164 	 addc a, r5
   0046 FA                  165 	 mov r2, a
   0047 EB                  166 	 mov a, r3
   0048 3E                  167 	 addc a, r6
   0049 FB                  168 	 mov r3, a
   004A EC                  169 	 mov a, r4
   004B 3F                  170 	 addc a, r7
   004C FC                  171 	 mov r4, a
   004D E4                  172 	 clr a
   004E 93                  173 	 movc a, @a+dptr
   004F 25*00               174 	 add a, (_logf_tmp + 0)
   0051 F5*00               175 	 mov (_logf_tmp + 0), a
   0053 74 01               176 	 mov a, #1
   0055 93                  177 	 movc a, @a+dptr
   0056 35*01               178 	 addc a, (_logf_tmp + 1)
   0058 F5*01               179 	 mov (_logf_tmp + 1), a
   005A 74 02               180 	 mov a, #2
   005C 93                  181 	 movc a, @a+dptr
   005D 35*02               182 	 addc a, (_logf_tmp + 2)
   005F F5*02               183 	 mov (_logf_tmp + 2), a
   0061 74 03               184 	 mov a, #3
   0063 93                  185 	 movc a, @a+dptr
   0064 35*03               186 	 addc a, (_logf_tmp + 3)
   0066 F5*03               187 	 mov (_logf_tmp + 3), a
   0068                     188 	logf_cordic_skip:
   0068 A3                  189 	 inc dptr
   0069 A3                  190 	 inc dptr
   006A A3                  191 	 inc dptr
   006B A3                  192 	 inc dptr
   006C 08                  193 	 inc r0
   006D B8 1E B7            194 	 cjne r0, #30, logf_cordic_loop
                            195 	
                            196 	
   0070 AC*03               197 	 mov r4, (_logf_tmp + 3)
   0072 AB*02               198 	 mov r3, (_logf_tmp + 2)
   0074 AA*01               199 	 mov r2, (_logf_tmp + 1)
   0076 A9*00               200 	 mov r1, (_logf_tmp + 0)
   0078 75 82 81            201 	 mov dpl, #129
   007B D2 D1               202 	 setb psw.1
   007D 12s00r00            203 	 lcall fs_normalize_a
   0080 D0 E0               204 	 pop acc
   0082 B4 7E 03            205 	 cjne a, #126, logf_exponent
                            206 	
                            207 	
                            208 	
                            209 	
   0085 02s00r00            210 	 ljmp fs_zerocheck_return
                            211 	
   0088                     212 	logf_exponent:
   0088 40 06               213 	 jc logf_exp_neg
                            214 	
   008A                     215 	logf_exp_pos:
   008A 24 82               216 	 add a, #130
   008C C2 D5               217 	 clr psw.5
   008E 80 05               218 	 sjmp logf_exp_scale
   0090                     219 	logf_exp_neg:
                            220 	
   0090 F4                  221 	 cpl a
   0091 24 7F               222 	 add a, #127
   0093 D2 D5               223 	 setb psw.5
   0095                     224 	logf_exp_scale:
                            225 	
   0095 F8                  226 	 mov r0, a
                            227 	
                            228 	
   0096 12s00r00            229 	 lcall fs_swap_a_b
                            230 	
   0099 74 18               231 	 mov a, #0x18
   009B 88 F0               232 	 mov b, r0
   009D A4                  233 	 mul ab
   009E F9                  234 	 mov r1, a
   009F AA F0               235 	 mov r2, b
   00A1 74 B1               236 	 mov a, #0xB1
   00A3 88 F0               237 	 mov b, r0
   00A5 A4                  238 	 mul ab
   00A6 FB                  239 	 mov r3, a
   00A7 AC F0               240 	 mov r4, b
   00A9 74 72               241 	 mov a, #0x72
   00AB 88 F0               242 	 mov b, r0
   00AD A4                  243 	 mul ab
   00AE 2A                  244 	 add a, r2
   00AF FA                  245 	 mov r2, a
   00B0 E5 F0               246 	 mov a, b
   00B2 3B                  247 	 addc a, r3
   00B3 FB                  248 	 mov r3, a
   00B4 E4                  249 	 clr a
   00B5 3C                  250 	 addc a, r4
   00B6 FC                  251 	 mov r4, a
                            252 	
   00B7 75 82 86            253 	 mov dpl, #134
   00BA 12s00r00            254 	 lcall fs_normalize_a
                            255 	
   00BD 02s00r00            256 	 ljmp fsadd_direct_entry
                            257 	 
   00C0 22                  258 	ret
                            259 	.area CSEG    (CODE)
                            260 	.area CONST   (CODE)
                            261 	.area XINIT   (CODE)
                            262 	.area CABS    (ABS,CODE)
