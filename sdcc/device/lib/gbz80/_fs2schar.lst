                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.4 #5595 (Oct 23 2013) (Mac OS X ppc)
                              4 ; This file was generated Wed Oct 23 12:26:10 2013
                              5 ;--------------------------------------------------------
                              6 	.module _fs2schar
                              7 	.optsdcc -mgbz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl ___fs2schar
                             13 ;--------------------------------------------------------
                             14 ;  ram data
                             15 ;--------------------------------------------------------
                             16 	.area _DATA
                             17 ;--------------------------------------------------------
                             18 ; overlayable items in  ram 
                             19 ;--------------------------------------------------------
                             20 	.area _OVERLAY
                             21 ;--------------------------------------------------------
                             22 ; external initialized ram data
                             23 ;--------------------------------------------------------
                             24 ;--------------------------------------------------------
                             25 ; global & static initialisations
                             26 ;--------------------------------------------------------
                             27 	.area _HOME
                             28 	.area _GSINIT
                             29 	.area _GSFINAL
                             30 	.area _GSINIT
                             31 ;--------------------------------------------------------
                             32 ; Home
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _HOME
                             36 ;--------------------------------------------------------
                             37 ; code
                             38 ;--------------------------------------------------------
                             39 	.area _CODE
                             40 ;../_fs2schar.c:77: signed char __fs2schar (float f)
                             41 ;	---------------------------------
                             42 ; Function __fs2schar
                             43 ; ---------------------------------
   0000                      44 ___fs2schar_start::
   0000                      45 ___fs2schar:
                             46 	
   0000 F5                   47 	push	af
   0001 F5                   48 	push	af
                             49 ;../_fs2schar.c:79: signed long sl=__fs2slong(f);
   0002 F8 08                50 	lda	hl,8(sp)
   0004 2A                   51 	ld	a,(hl+)
   0005 66                   52 	ld	h,(hl)
   0006 6F                   53 	ld	l,a
   0007 E5                   54 	push	hl
   0008 F8 08                55 	lda	hl,8(sp)
   000A 2A                   56 	ld	a,(hl+)
   000B 66                   57 	ld	h,(hl)
   000C 6F                   58 	ld	l,a
   000D E5                   59 	push	hl
   000E CDr00s00             60 	call	___fs2slong
   0011 E8 04                61 	lda	sp,4(sp)
   0013 E5                   62 	push	hl
   0014 F8 02                63 	lda	hl,2(sp)
   0016 73                   64 	ld	(hl),e
   0017 23                   65 	inc	hl
   0018 72                   66 	ld	(hl),d
   0019 D1                   67 	pop	de
   001A 23                   68 	inc	hl
   001B 73                   69 	ld	(hl),e
   001C 23                   70 	inc	hl
   001D 72                   71 	ld	(hl),d
                             72 ;../_fs2schar.c:80: if (sl>=SCHAR_MAX)
   001E F8 00                73 	lda	hl,0(sp)
   0020 7E                   74 	ld	a,(hl)
   0021 D6 7F                75 	sub	a,#0x7F
   0023 23                   76 	inc	hl
   0024 7E                   77 	ld	a,(hl)
   0025 DE 00                78 	sbc	a,#0x00
   0027 23                   79 	inc	hl
   0028 7E                   80 	ld	a,(hl)
   0029 DE 00                81 	sbc	a,#0x00
   002B 23                   82 	inc	hl
   002C 7E                   83 	ld	a,(hl)
   002D DE 00                84 	sbc	a,#0x00
   002F 07                   85 	rlca
   0030 DAr38s00             86 	jp	C,00102$
                             87 ;../_fs2schar.c:81: return SCHAR_MAX;
   0033 1E 7F                88 	ld	e,#0x7F
   0035 C3r55s00             89 	jp	00105$
   0038                      90 00102$:
                             91 ;../_fs2schar.c:82: if (sl<=SCHAR_MIN)
   0038 3E 80                92 	ld	a,#0x80
   003A F8 00                93 	lda	hl,0(sp)
   003C 96                   94 	sub	a,(hl)
   003D 3E FF                95 	ld	a,#0xFF
   003F 23                   96 	inc	hl
   0040 9E                   97 	sbc	a,(hl)
   0041 3E FF                98 	ld	a,#0xFF
   0043 23                   99 	inc	hl
   0044 9E                  100 	sbc	a,(hl)
   0045 3E FF               101 	ld	a,#0xFF
   0047 23                  102 	inc	hl
   0048 9E                  103 	sbc	a,(hl)
   0049 07                  104 	rlca
   004A DAr52s00            105 	jp	C,00104$
                            106 ;../_fs2schar.c:83: return -SCHAR_MIN;
   004D 1E 80               107 	ld	e,#0x80
   004F C3r55s00            108 	jp	00105$
   0052                     109 00104$:
                            110 ;../_fs2schar.c:84: return sl;
   0052 F8 00               111 	lda	hl,0(sp)
   0054 5E                  112 	ld	e,(hl)
   0055                     113 00105$:
   0055 E8 04               114 	lda	sp,4(sp)
   0057 C9                  115 	ret
   0058                     116 ___fs2schar_end::
                            117 	.area _CODE
                            118 	.area _CABS
