                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.4 #5595 (Oct 23 2013) (Mac OS X ppc)
                              4 ; This file was generated Wed Oct 23 12:26:12 2013
                              5 ;--------------------------------------------------------
                              6 	.module rand
                              7 	.optsdcc -mgbz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _rand
                             13 	.globl _srand
                             14 ;--------------------------------------------------------
                             15 ;  ram data
                             16 ;--------------------------------------------------------
                             17 	.area _DATA
   0000                      18 _next:
   0000                      19 	.ds 4
                             20 ;--------------------------------------------------------
                             21 ; overlayable items in  ram 
                             22 ;--------------------------------------------------------
                             23 	.area _OVERLAY
                             24 ;--------------------------------------------------------
                             25 ; external initialized ram data
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; global & static initialisations
                             29 ;--------------------------------------------------------
                             30 	.area _HOME
                             31 	.area _GSINIT
                             32 	.area _GSFINAL
                             33 	.area _GSINIT
                             34 ;../rand.c:27: static unsigned long int next = 1;
   0000 21r00s00             35 	ld	hl,#_next
   0003 36 01                36 	ld	(hl),#0x01
   0005 AF                   37 	xor	a,a
   0006 21r01s00             38 	ld	hl,#_next + 1
   0009 77                   39 	ld	(hl),a
   000A 21r02s00             40 	ld	hl,#_next + 2
   000D 77                   41 	ld	(hl),a
   000E 21r03s00             42 	ld	hl,#_next + 3
   0011 77                   43 	ld	(hl),a
                             44 ;--------------------------------------------------------
                             45 ; Home
                             46 ;--------------------------------------------------------
                             47 	.area _HOME
                             48 	.area _HOME
                             49 ;--------------------------------------------------------
                             50 ; code
                             51 ;--------------------------------------------------------
                             52 	.area _CODE
                             53 ;../rand.c:29: int rand(void)
                             54 ;	---------------------------------
                             55 ; Function rand
                             56 ; ---------------------------------
   0000                      57 _rand_start::
   0000                      58 _rand:
                             59 	
   0000 F5                   60 	push	af
   0001 F5                   61 	push	af
                             62 ;../rand.c:31: next = next * 1103515245UL + 12345;
   0002 21r02s00             63 	ld	hl,#_next + 2
   0005 2A                   64 	ld	a,(hl+)
   0006 66                   65 	ld	h,(hl)
   0007 6F                   66 	ld	l,a
   0008 E5                   67 	push	hl
   0009 21r00s00             68 	ld	hl,#_next
   000C 2A                   69 	ld	a,(hl+)
   000D 66                   70 	ld	h,(hl)
   000E 6F                   71 	ld	l,a
   000F E5                   72 	push	hl
   0010 21 C6 41             73 	ld	hl,#0x41C6
   0013 E5                   74 	push	hl
   0014 21 6D 4E             75 	ld	hl,#0x41C64E6D
   0017 E5                   76 	push	hl
   0018 CDr00s00             77 	call	__mullong_rrx_s
   001B E8 08                78 	lda	sp,8(sp)
   001D E5                   79 	push	hl
   001E F8 02                80 	lda	hl,2(sp)
   0020 73                   81 	ld	(hl),e
   0021 23                   82 	inc	hl
   0022 72                   83 	ld	(hl),d
   0023 D1                   84 	pop	de
   0024 23                   85 	inc	hl
   0025 73                   86 	ld	(hl),e
   0026 23                   87 	inc	hl
   0027 72                   88 	ld	(hl),d
   0028 F8 01                89 	lda	hl,1(sp)
   002A 2B                   90 	dec	hl
   002B 5E                   91 	ld	e,(hl)
   002C 23                   92 	inc	hl
   002D 56                   93 	ld	d,(hl)
   002E 7B                   94 	ld	a,e
   002F C6 39                95 	add	a,#0x39
   0031 5F                   96 	ld	e,a
   0032 7A                   97 	ld	a,d
   0033 CE 30                98 	adc	a,#0x30
   0035 F5                   99 	push	af
   0036 21r01s00            100 	ld	hl,#_next + 1
   0039 77                  101 	ld	(hl),a
   003A 21r00s00            102 	ld	hl,#_next
   003D 73                  103 	ld	(hl),e
   003E F8 05               104 	lda	hl,5(sp)
   0040 2B                  105 	dec	hl
   0041 5E                  106 	ld	e,(hl)
   0042 23                  107 	inc	hl
   0043 56                  108 	ld	d,(hl)
   0044 F1                  109 	pop	af
   0045 7B                  110 	ld	a,e
   0046 CE 00               111 	adc	a,#0x00
   0048 5F                  112 	ld	e,a
   0049 7A                  113 	ld	a,d
   004A CE 00               114 	adc	a,#0x00
   004C 21r03s00            115 	ld	hl,#_next + 3
   004F 77                  116 	ld	(hl),a
   0050 21r02s00            117 	ld	hl,#_next + 2
   0053 73                  118 	ld	(hl),e
                            119 ;../rand.c:32: return (unsigned int)(next/65536) % (RAND_MAX + 1U);
   0054 3E 10               120 	ld	a,#0x10
   0056 F5                  121 	push	af
   0057 33                  122 	inc	sp
   0058 21r02s00            123 	ld	hl,#_next + 2
   005B 2A                  124 	ld	a,(hl+)
   005C 66                  125 	ld	h,(hl)
   005D 6F                  126 	ld	l,a
   005E E5                  127 	push	hl
   005F 21r00s00            128 	ld	hl,#_next
   0062 2A                  129 	ld	a,(hl+)
   0063 66                  130 	ld	h,(hl)
   0064 6F                  131 	ld	l,a
   0065 E5                  132 	push	hl
   0066 CDr00s00            133 	call	__rrulong_rrx_s
   0069 E8 05               134 	lda	sp,5(sp)
   006B E5                  135 	push	hl
   006C F8 02               136 	lda	hl,2(sp)
   006E 73                  137 	ld	(hl),e
   006F 23                  138 	inc	hl
   0070 72                  139 	ld	(hl),d
   0071 D1                  140 	pop	de
   0072 23                  141 	inc	hl
   0073 73                  142 	ld	(hl),e
   0074 23                  143 	inc	hl
   0075 72                  144 	ld	(hl),d
   0076 F8 00               145 	lda	hl,0(sp)
   0078 4E                  146 	ld	c,(hl)
   0079 23                  147 	inc	hl
   007A 46                  148 	ld	b,(hl)
   007B 59                  149 	ld	e,c
   007C 78                  150 	ld	a,b
   007D E6 7F               151 	and	a,#0x7F
   007F 57                  152 	ld	d,a
   0080                     153 00101$:
   0080 E8 04               154 	lda	sp,4(sp)
   0082 C9                  155 	ret
   0083                     156 _rand_end::
                            157 ;../rand.c:35: void srand(unsigned int seed)
                            158 ;	---------------------------------
                            159 ; Function srand
                            160 ; ---------------------------------
   0083                     161 _srand_start::
   0083                     162 _srand:
                            163 	
                            164 ;../rand.c:37: next = seed;
   0083 F8 02               165 	lda	hl,2(sp)
   0085 7E                  166 	ld	a,(hl)
   0086 21r00s00            167 	ld	hl,#_next
   0089 77                  168 	ld	(hl),a
   008A F8 03               169 	lda	hl,3(sp)
   008C 7E                  170 	ld	a,(hl)
   008D 21r01s00            171 	ld	hl,#_next + 1
   0090 77                  172 	ld	(hl),a
   0091 21r02s00            173 	ld	hl,#_next + 2
   0094 36 00               174 	ld	(hl),#0x00
   0096 21r03s00            175 	ld	hl,#_next + 3
   0099 36 00               176 	ld	(hl),#0x00
   009B                     177 00101$:
                            178 	
   009B C9                  179 	ret
   009C                     180 _srand_end::
                            181 	.area _CODE
                            182 	.area _CABS
