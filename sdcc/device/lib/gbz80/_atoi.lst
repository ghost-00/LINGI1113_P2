                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.4 #5595 (Oct 23 2013) (Mac OS X ppc)
                              4 ; This file was generated Wed Oct 23 12:26:12 2013
                              5 ;--------------------------------------------------------
                              6 	.module _atoi
                              7 	.optsdcc -mgbz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _atoi
                             13 ;--------------------------------------------------------
                             14 ;  ram data
                             15 ;--------------------------------------------------------
                             16 	.area _DATA
                             17 ;--------------------------------------------------------
                             18 ; overlayable items in  ram 
                             19 ;--------------------------------------------------------
                             20 	.area _OVERLAY
                             21 ;--------------------------------------------------------
                             22 ; external initialized ram data
                             23 ;--------------------------------------------------------
                             24 ;--------------------------------------------------------
                             25 ; global & static initialisations
                             26 ;--------------------------------------------------------
                             27 	.area _HOME
                             28 	.area _GSINIT
                             29 	.area _GSFINAL
                             30 	.area _GSINIT
                             31 ;--------------------------------------------------------
                             32 ; Home
                             33 ;--------------------------------------------------------
                             34 	.area _HOME
                             35 	.area _HOME
                             36 ;--------------------------------------------------------
                             37 ; code
                             38 ;--------------------------------------------------------
                             39 	.area _CODE
                             40 ;../_atoi.c:25: int atoi(char * s)
                             41 ;	---------------------------------
                             42 ; Function atoi
                             43 ; ---------------------------------
   0000                      44 _atoi_start::
   0000                      45 _atoi:
   0000 E8 F7                46 	lda	sp,-9(sp)
                             47 ;../_atoi.c:27: register int rv=0; 
   0002 F8 07                48 	lda	hl,7(sp)
   0004 36 00                49 	ld	(hl),#0x00
   0006 23                   50 	inc	hl
   0007 36 00                51 	ld	(hl),#0x00
                             52 ;../_atoi.c:31: while (*s) {
   0009 F8 0C                53 	lda	hl,12(sp)
   000B 2B                   54 	dec	hl
   000C 4E                   55 	ld	c,(hl)
   000D 23                   56 	inc	hl
   000E 46                   57 	ld	b,(hl)
   000F                      58 00107$:
   000F 0A                   59 	ld	a,(bc)
   0010 F8 06                60 	lda	hl,6(sp)
   0012 77                   61 	ld	(hl),a
   0013 B7                   62 	or	a,a
   0014 CAr38s00             63 	jp	Z,00133$
                             64 ;../_atoi.c:32: if (*s <= '9' && *s >= '0')
   0017 3E 39                65 	ld	a,#0x39
   0019 96                   66 	sub	a,(hl)
   001A 07                   67 	rlca
   001B DAr25s00             68 	jp	C,00102$
   001E 7E                   69 	ld	a,(hl)
   001F D6 30                70 	sub	a,#0x30
   0021 07                   71 	rlca
   0022 D2r38s00             72 	jp	NC,00133$
                             73 ;../_atoi.c:33: break;
   0025                      74 00102$:
                             75 ;../_atoi.c:34: if (*s == '-' || *s == '+') 
   0025 0A                   76 	ld	a,(bc)
   0026 F8 06                77 	lda	hl,6(sp)
   0028 77                   78 	ld	(hl),a
   0029 D6 2D                79 	sub	a,#0x2D
   002B CAr38s00             80 	jp	Z,00133$
   002E                      81 00135$:
   002E 7E                   82 	ld	a,(hl)
   002F D6 2B                83 	sub	a,#0x2B
   0031 CAr38s00             84 	jp	Z,00133$
   0034                      85 00136$:
                             86 ;../_atoi.c:36: s++;
   0034 03                   87 	inc	bc
   0035 C3r0Fs00             88 	jp	00107$
   0038                      89 00133$:
   0038 F8 0B                90 	lda	hl,11(sp)
   003A 71                   91 	ld	(hl),c
   003B 23                   92 	inc	hl
   003C 70                   93 	ld	(hl),b
                             94 ;../_atoi.c:39: sign = (*s == '-');
   003D F8 04                95 	lda	hl,4(sp)
   003F 71                   96 	ld	(hl),c
   0040 23                   97 	inc	hl
   0041 70                   98 	ld	(hl),b
   0042 0A                   99 	ld	a,(bc)
   0043 4F                  100 	ld	c,a
   0044 D6 2D               101 	sub	a,#0x2D
   0046 C2r4Ds00            102 	jp	NZ,00137$
   0049 3E 01               103 	ld	a,#0x01
   004B 18 01               104 	jr	00138$
   004D                     105 00137$:
   004D AF                  106 	xor	a,a
   004E                     107 00138$:
   004E 47                  108 	ld	b,a
   004F F8 06               109 	lda	hl,6(sp)
   0051 70                  110 	ld	(hl),b
                            111 ;../_atoi.c:40: if (*s == '-' || *s == '+') s++;
   0052 AF                  112 	xor	a,a
   0053 B0                  113 	or	a,b
   0054 C2r62s00            114 	jp	NZ,00110$
   0057 79                  115 	ld	a,c
   0058 D6 2B               116 	sub	a,#0x2B
   005A C2r72s00            117 	jp	NZ,00131$
   005D 18 03               118 	jr	00140$
   005F                     119 00139$:
   005F C3r72s00            120 	jp	00131$
   0062                     121 00140$:
   0062                     122 00110$:
   0062 F8 05               123 	lda	hl,5(sp)
   0064 2B                  124 	dec	hl
   0065 5E                  125 	ld	e,(hl)
   0066 23                  126 	inc	hl
   0067 56                  127 	ld	d,(hl)
   0068 21 01 00            128 	ld	hl,#0x0001
   006B 19                  129 	add	hl,de
   006C 7D                  130 	ld	a,l
   006D 54                  131 	ld	d,h
   006E F8 0B               132 	lda	hl,11(sp)
   0070 22                  133 	ld	(hl+),a
   0071 72                  134 	ld	(hl),d
                            135 ;../_atoi.c:42: while (*s && *s >= '0' && *s <= '9') {
   0072                     136 00131$:
   0072 F8 0B               137 	lda	hl,11(sp)
   0074 2A                  138 	ld	a,(hl+)
   0075 5E                  139 	ld	e,(hl)
   0076 F8 02               140 	lda	hl,2(sp)
   0078 22                  141 	ld	(hl+),a
   0079 73                  142 	ld	(hl),e
   007A                     143 00115$:
   007A F8 03               144 	lda	hl,3(sp)
   007C 2B                  145 	dec	hl
   007D 5E                  146 	ld	e,(hl)
   007E 23                  147 	inc	hl
   007F 56                  148 	ld	d,(hl)
   0080 1A                  149 	ld	a,(de)
   0081 4F                  150 	ld	c,a
   0082 B7                  151 	or	a,a
   0083 CArC8s00            152 	jp	Z,00117$
   0086 79                  153 	ld	a,c
   0087 D6 30               154 	sub	a,#0x30
   0089 07                  155 	rlca
   008A DArC8s00            156 	jp	C,00117$
   008D 3E 39               157 	ld	a,#0x39
   008F 91                  158 	sub	a,c
   0090 07                  159 	rlca
   0091 DArC8s00            160 	jp	C,00117$
                            161 ;../_atoi.c:43: rv = (rv * 10) + (*s - '0');
   0094 F8 08               162 	lda	hl,8(sp)
   0096 2B                  163 	dec	hl
   0097 5E                  164 	ld	e,(hl)
   0098 23                  165 	inc	hl
   0099 56                  166 	ld	d,(hl)
   009A 6B                  167 	ld	l,e
   009B 62                  168 	ld	h,d
   009C 29                  169 	add	hl,hl
   009D 29                  170 	add	hl,hl
   009E 19                  171 	add	hl,de
   009F 29                  172 	add	hl,hl
   00A0 7D                  173 	ld	a,l
   00A1 54                  174 	ld	d,h
   00A2 F8 00               175 	lda	hl,0(sp)
   00A4 22                  176 	ld	(hl+),a
   00A5 72                  177 	ld	(hl),d
   00A6 79                  178 	ld	a,c
   00A7 17                  179 	rla	
   00A8 9F                  180 	sbc	a,a
   00A9 47                  181 	ld	b,a
   00AA 79                  182 	ld	a,c
   00AB C6 D0               183 	add	a,#0xD0
   00AD 4F                  184 	ld	c,a
   00AE 78                  185 	ld	a,b
   00AF CE FF               186 	adc	a,#0xFF
   00B1 47                  187 	ld	b,a
   00B2 2B                  188 	dec	hl
   00B3 2A                  189 	ld	a,(hl+)
   00B4 66                  190 	ld	h,(hl)
   00B5 6F                  191 	ld	l,a
   00B6 09                  192 	add	hl,bc
   00B7 4D                  193 	ld	c,l
   00B8 44                  194 	ld	b,h
   00B9 F8 07               195 	lda	hl,7(sp)
   00BB 71                  196 	ld	(hl),c
   00BC 23                  197 	inc	hl
   00BD 70                  198 	ld	(hl),b
                            199 ;../_atoi.c:44: s++;
   00BE F8 02               200 	lda	hl,2(sp)
   00C0 34                  201 	inc	(hl)
   00C1 20 02               202 	jr	NZ,00141$
   00C3 23                  203 	inc	hl
   00C4 34                  204 	inc	(hl)
   00C5                     205 00141$:
   00C5 C3r7As00            206 	jp	00115$
   00C8                     207 00117$:
                            208 ;../_atoi.c:47: return (sign ? -rv : rv);
   00C8 AF                  209 	xor	a,a
   00C9 F8 06               210 	lda	hl,6(sp)
   00CB B6                  211 	or	a,(hl)
   00CC CArDDs00            212 	jp	Z,00120$
   00CF AF                  213 	xor	a,a
   00D0 23                  214 	inc	hl
   00D1 3E 00               215 	ld	a,#0x00
   00D3 9E                  216 	sbc	a,(hl)
   00D4 4F                  217 	ld	c,a
   00D5 23                  218 	inc	hl
   00D6 3E 00               219 	ld	a,#0x00
   00D8 9E                  220 	sbc	a,(hl)
   00D9 47                  221 	ld	b,a
   00DA C3rE3s00            222 	jp	00121$
   00DD                     223 00120$:
   00DD F8 08               224 	lda	hl,8(sp)
   00DF 2B                  225 	dec	hl
   00E0 4E                  226 	ld	c,(hl)
   00E1 23                  227 	inc	hl
   00E2 46                  228 	ld	b,(hl)
   00E3                     229 00121$:
   00E3 59                  230 	ld	e,c
   00E4 50                  231 	ld	d,b
   00E5                     232 00118$:
   00E5 E8 09               233 	lda	sp,9(sp)
   00E7 C9                  234 	ret
   00E8                     235 _atoi_end::
                            236 	.area _CODE
                            237 	.area _CABS
