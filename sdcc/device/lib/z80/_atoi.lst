                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.4 #5595 (Oct 23 2013) (Mac OS X ppc)
                              4 ; This file was generated Wed Oct 23 12:26:08 2013
                              5 ;--------------------------------------------------------
                              6 	.module _atoi
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _atoi
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ;  ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
                             20 ;--------------------------------------------------------
                             21 ; overlayable items in  ram 
                             22 ;--------------------------------------------------------
                             23 	.area _OVERLAY
                             24 ;--------------------------------------------------------
                             25 ; external initialized ram data
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; global & static initialisations
                             29 ;--------------------------------------------------------
                             30 	.area _HOME
                             31 	.area _GSINIT
                             32 	.area _GSFINAL
                             33 	.area _GSINIT
                             34 ;--------------------------------------------------------
                             35 ; Home
                             36 ;--------------------------------------------------------
                             37 	.area _HOME
                             38 	.area _HOME
                             39 ;--------------------------------------------------------
                             40 ; code
                             41 ;--------------------------------------------------------
                             42 	.area _CODE
                             43 ;../_atoi.c:25: int atoi(char * s)
                             44 ;	---------------------------------
                             45 ; Function atoi
                             46 ; ---------------------------------
   0000                      47 _atoi_start::
   0000                      48 _atoi:
   0000 DD E5                49 	push	ix
   0002 DD 21 00 00          50 	ld	ix,#0
   0006 DD 39                51 	add	ix,sp
   0008 F5                   52 	push	af
   0009 F5                   53 	push	af
                             54 ;../_atoi.c:27: register int rv=0; 
   000A DD 36 FE 00          55 	ld	-2 (ix),#0x00
   000E DD 36 FF 00          56 	ld	-1 (ix),#0x00
                             57 ;../_atoi.c:31: while (*s) {
   0012 DD 5E 04             58 	ld	e,4 (ix)
   0015 DD 56 05             59 	ld	d,5 (ix)
   0018                      60 00107$:
   0018 1A                   61 	ld	a,(de)
   0019 6F                   62 	ld	l,a
   001A B7                   63 	or	a,a
   001B 28 1A                64 	jr	Z,00133$
                             65 ;../_atoi.c:32: if (*s <= '9' && *s >= '0')
   001D 3E 39                66 	ld	a,#0x39
   001F 95                   67 	sub	a,l
   0020 FAr29s00             68 	jp	M,00102$
   0023 7D                   69 	ld	a,l
   0024 D6 30                70 	sub	a,#0x30
   0026 F2r37s00             71 	jp	P,00133$
                             72 ;../_atoi.c:33: break;
   0029                      73 00102$:
                             74 ;../_atoi.c:34: if (*s == '-' || *s == '+') 
   0029 1A                   75 	ld	a,(de)
   002A 6F                   76 	ld	l,a
   002B D6 2D                77 	sub	a,#0x2D
   002D 28 08                78 	jr	Z,00133$
   002F 7D                   79 	ld	a,l
   0030 D6 2B                80 	sub	a,#0x2B
   0032 28 03                81 	jr	Z,00133$
                             82 ;../_atoi.c:36: s++;
   0034 13                   83 	inc	de
   0035 18 E1                84 	jr	00107$
   0037                      85 00133$:
   0037 DD 73 04             86 	ld	4 (ix),e
   003A DD 72 05             87 	ld	5 (ix),d
                             88 ;../_atoi.c:39: sign = (*s == '-');
   003D 4B                   89 	ld	c,e
   003E 42                   90 	ld	b,d
   003F 1A                   91 	ld	a,(de)
   0040 6F                   92 	ld	l,a
   0041 D6 2D                93 	sub	a,#0x2D
   0043 20 04                94 	jr	NZ,00137$
   0045 3E 01                95 	ld	a,#0x01
   0047 18 01                96 	jr	00138$
   0049                      97 00137$:
   0049 AF                   98 	xor	a,a
   004A                      99 00138$:
   004A 5F                  100 	ld	e,a
   004B 53                  101 	ld	d,e
                            102 ;../_atoi.c:40: if (*s == '-' || *s == '+') s++;
   004C AF                  103 	xor	a,a
   004D B3                  104 	or	a,e
   004E 20 05               105 	jr	NZ,00110$
   0050 7D                  106 	ld	a,l
   0051 D6 2B               107 	sub	a,#0x2B
   0053 20 0A               108 	jr	NZ,00131$
   0055                     109 00110$:
   0055 21 01 00            110 	ld	hl,#0x0001
   0058 09                  111 	add	hl,bc
   0059 DD 75 04            112 	ld	4 (ix),l
   005C DD 74 05            113 	ld	5 (ix),h
                            114 ;../_atoi.c:42: while (*s && *s >= '0' && *s <= '9') {
   005F                     115 00131$:
   005F DD 7E 04            116 	ld	a,4 (ix)
   0062 DD 77 FC            117 	ld	-4 (ix),a
   0065 DD 7E 05            118 	ld	a,5 (ix)
   0068 DD 77 FD            119 	ld	-3 (ix),a
   006B                     120 00115$:
   006B DD 6E FC            121 	ld	l,-4 (ix)
   006E DD 66 FD            122 	ld	h,-3 (ix)
   0071 5E                  123 	ld	e,(hl)
   0072 AF                  124 	xor	a,a
   0073 B3                  125 	or	a,e
   0074 28 3D               126 	jr	Z,00117$
   0076 7B                  127 	ld	a,e
   0077 D6 30               128 	sub	a,#0x30
   0079 FArB3s00            129 	jp	M,00117$
   007C 3E 39               130 	ld	a,#0x39
   007E 93                  131 	sub	a,e
   007F FArB3s00            132 	jp	M,00117$
                            133 ;../_atoi.c:43: rv = (rv * 10) + (*s - '0');
   0082 D5                  134 	push	de
   0083 DD 5E FE            135 	ld	e,-2 (ix)
   0086 DD 56 FF            136 	ld	d,-1 (ix)
   0089 6B                  137 	ld	l,e
   008A 62                  138 	ld	h,d
   008B 29                  139 	add	hl,hl
   008C 29                  140 	add	hl,hl
   008D 19                  141 	add	hl,de
   008E 29                  142 	add	hl,hl
   008F D1                  143 	pop	de
   0090 4D                  144 	ld	c,l
   0091 44                  145 	ld	b,h
   0092 7B                  146 	ld	a,e
   0093 6F                  147 	ld	l,a
   0094 17                  148 	rla	
   0095 9F                  149 	sbc	a,a
   0096 67                  150 	ld	h,a
   0097 7D                  151 	ld	a,l
   0098 C6 D0               152 	add	a,#0xD0
   009A 6F                  153 	ld	l,a
   009B 7C                  154 	ld	a,h
   009C CE FF               155 	adc	a,#0xFF
   009E 67                  156 	ld	h,a
   009F 09                  157 	add	hl,bc
   00A0 4D                  158 	ld	c,l
   00A1 44                  159 	ld	b,h
   00A2 DD 71 FE            160 	ld	-2 (ix),c
   00A5 DD 70 FF            161 	ld	-1 (ix),b
                            162 ;../_atoi.c:44: s++;
   00A8 DD 34 FC            163 	inc	-4 (ix)
   00AB 20 BE               164 	jr	NZ,00115$
   00AD DD 34 FD            165 	inc	-3 (ix)
   00B0 C3r6Bs00            166 	jp	00115$
   00B3                     167 00117$:
                            168 ;../_atoi.c:47: return (sign ? -rv : rv);
   00B3 AF                  169 	xor	a,a
   00B4 B2                  170 	or	a,d
   00B5 28 0D               171 	jr	Z,00120$
   00B7 AF                  172 	xor	a,a
   00B8 DD 9E FE            173 	sbc	a,-2 (ix)
   00BB 4F                  174 	ld	c,a
   00BC 3E 00               175 	ld	a,#0x00
   00BE DD 9E FF            176 	sbc	a,-1 (ix)
   00C1 47                  177 	ld	b,a
   00C2 18 06               178 	jr	00121$
   00C4                     179 00120$:
   00C4 DD 4E FE            180 	ld	c,-2 (ix)
   00C7 DD 46 FF            181 	ld	b,-1 (ix)
   00CA                     182 00121$:
   00CA 69                  183 	ld	l,c
   00CB 60                  184 	ld	h,b
   00CC DD F9               185 	ld	sp,ix
   00CE DD E1               186 	pop	ix
   00D0 C9                  187 	ret
   00D1                     188 _atoi_end::
                            189 	.area _CODE
                            190 	.area _CABS
