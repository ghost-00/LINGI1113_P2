                              1         .area   _CODE
                              2 
   0000                       3 __mulint_rrx_s::
   0000 F1                    4         pop     af
   0001 E1                    5         pop     hl
   0002 D1                    6         pop     de
   0003 D5                    7         push    de
   0004 E5                    8         push    hl
   0005 F5                    9         push    af
                             10 
                             11         ;; Fall through
                             12 
   0006                      13 __muluchar_rrx_hds::
   0006                      14 __mulint_rrx_hds::
                             15 	;; Parameters:
                             16 	;;	hl, de (left, right irrelevant)
   0006 44                   17 	ld	b,h
   0007 4D                   18 	ld	c,l
                             19 
                             20 	;; 16-bit multiplication
                             21 	;;
                             22 	;; Entry conditions
                             23 	;; bc = multiplicand
                             24 	;; de = multiplier
                             25 	;;
                             26 	;; Exit conditions
                             27 	;; hl = less significant word of product
                             28 	;;
                             29 	;; Register used: AF,BC,DE,HL
   0008                      30 __mul16::
   0008 AF                   31 	xor	a,a
   0009 6F                   32 	ld	l,a
   000A B0                   33 	or	a,b
   000B 06 10                34 	ld	b,#16
                             35 
                             36         ;; Optimise for the case when this side has 8 bits of data or
                             37         ;; less.  This is often the case with support address calls.
   000D 20 04                38         jr      NZ,2$
   000F 06 08                39         ld      b,#8
   0011 79                   40         ld      a,c
   0012                      41 1$:
                             42         ;; Taken from z88dk, which originally borrowed from the
                             43         ;; Spectrum rom.
   0012 29                   44         add     hl,hl
   0013                      45 2$:
   0013 CB 11                46         rl      c
   0015 17                   47         rla                     ;DLE 27/11/98
   0016 30 01                48         jr      NC,3$
   0018 19                   49         add     hl,de
   0019                      50 3$:
   0019 10 F7                51         djnz    1$
   001B C9                   52         ret
                             53 
