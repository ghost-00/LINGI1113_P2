                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.4 #5595 (Oct 23 2013) (Mac OS X ppc)
                              4 ; This file was generated Wed Oct 23 12:26:06 2013
                              5 ;--------------------------------------------------------
                              6 	.module _atof
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _atof
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ;  ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
                             20 ;--------------------------------------------------------
                             21 ; overlayable items in  ram 
                             22 ;--------------------------------------------------------
                             23 	.area _OVERLAY
                             24 ;--------------------------------------------------------
                             25 ; external initialized ram data
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; global & static initialisations
                             29 ;--------------------------------------------------------
                             30 	.area _HOME
                             31 	.area _GSINIT
                             32 	.area _GSFINAL
                             33 	.area _GSINIT
                             34 ;--------------------------------------------------------
                             35 ; Home
                             36 ;--------------------------------------------------------
                             37 	.area _HOME
                             38 	.area _HOME
                             39 ;--------------------------------------------------------
                             40 ; code
                             41 ;--------------------------------------------------------
                             42 	.area _CODE
                             43 ;../_atof.c:23: float atof(char * s)
                             44 ;	---------------------------------
                             45 ; Function atof
                             46 ; ---------------------------------
   0000                      47 _atof_start::
   0000                      48 _atof:
   0000 DD E5                49 	push	ix
   0002 DD 21 00 00          50 	ld	ix,#0
   0006 DD 39                51 	add	ix,sp
   0008 21 F0 FF             52 	ld	hl,#-16
   000B 39                   53 	add	hl,sp
   000C F9                   54 	ld	sp,hl
                             55 ;../_atof.c:30: while (isspace(*s)) s++;
   000D DD 4E 04             56 	ld	c,4 (ix)
   0010 DD 46 05             57 	ld	b,5 (ix)
   0013                      58 00101$:
   0013 0A                   59 	ld	a,(bc)
   0014 6F                   60 	ld	l,a
   0015 C5                   61 	push	bc
   0016 7D                   62 	ld	a,l
   0017 F5                   63 	push	af
   0018 33                   64 	inc	sp
   0019 CDr00s00             65 	call	_isspace
   001C 33                   66 	inc	sp
   001D C1                   67 	pop	bc
   001E AF                   68 	xor	a,a
   001F B5                   69 	or	a,l
   0020 28 03                70 	jr	Z,00148$
   0022 03                   71 	inc	bc
   0023 18 EE                72 	jr	00101$
   0025                      73 00148$:
   0025 DD 71 04             74 	ld	4 (ix),c
   0028 DD 70 05             75 	ld	5 (ix),b
                             76 ;../_atof.c:33: if (*s == '-')
   002B 0A                   77 	ld	a,(bc)
   002C 5F                   78 	ld	e,a
   002D D6 2D                79 	sub	a,#0x2D
   002F 20 10                80 	jr	NZ,00107$
                             81 ;../_atof.c:35: sign=1;
   0031 DD 36 F6 01          82 	ld	-10 (ix),#0x01
                             83 ;../_atof.c:36: s++;
   0035 21 01 00             84 	ld	hl,#0x0001
   0038 09                   85 	add	hl,bc
   0039 DD 75 04             86 	ld	4 (ix),l
   003C DD 74 05             87 	ld	5 (ix),h
   003F 18 13                88 	jr	00108$
   0041                      89 00107$:
                             90 ;../_atof.c:40: sign=0;
   0041 DD 36 F6 00          91 	ld	-10 (ix),#0x00
                             92 ;../_atof.c:41: if (*s == '+') s++;
   0045 7B                   93 	ld	a,e
   0046 D6 2B                94 	sub	a,#0x2B
   0048 20 0A                95 	jr	NZ,00108$
   004A 21 01 00             96 	ld	hl,#0x0001
   004D 09                   97 	add	hl,bc
   004E DD 75 04             98 	ld	4 (ix),l
   0051 DD 74 05             99 	ld	5 (ix),h
   0054                     100 00108$:
                            101 ;../_atof.c:45: for (value=0.0; isdigit(*s); s++)
   0054 DD 36 FC 00         102 	ld	-4 (ix),#0x00
   0058 DD 36 FD 00         103 	ld	-3 (ix),#0x00
   005C DD 36 FE 00         104 	ld	-2 (ix),#0x00
   0060 DD 36 FF 00         105 	ld	-1 (ix),#0x00
   0064 DD 7E 04            106 	ld	a,4 (ix)
   0067 DD 77 F4            107 	ld	-12 (ix),a
   006A DD 7E 05            108 	ld	a,5 (ix)
   006D DD 77 F5            109 	ld	-11 (ix),a
   0070                     110 00121$:
   0070 DD 6E F4            111 	ld	l,-12 (ix)
   0073 DD 66 F5            112 	ld	h,-11 (ix)
   0076 7E                  113 	ld	a,(hl)
   0077 F5                  114 	push	af
   0078 33                  115 	inc	sp
   0079 CDr00s00            116 	call	_isdigit
   007C 33                  117 	inc	sp
   007D AF                  118 	xor	a,a
   007E B5                  119 	or	a,l
   007F CArF5s00            120 	jp	Z,00149$
                            121 ;../_atof.c:47: value=10.0*value+(*s-'0');
   0082 DD 6E FE            122 	ld	l,-2 (ix)
   0085 DD 66 FF            123 	ld	h,-1 (ix)
   0088 E5                  124 	push	hl
   0089 DD 6E FC            125 	ld	l,-4 (ix)
   008C DD 66 FD            126 	ld	h,-3 (ix)
   008F E5                  127 	push	hl
   0090 21 20 41            128 	ld	hl,#0x4120
   0093 E5                  129 	push	hl
   0094 21 00 00            130 	ld	hl,#0x0000
   0097 E5                  131 	push	hl
   0098 CDr00s00            132 	call	___fsmul
   009B F1                  133 	pop	af
   009C F1                  134 	pop	af
   009D F1                  135 	pop	af
   009E F1                  136 	pop	af
   009F DD 72 F3            137 	ld	-13 (ix),d
   00A2 DD 73 F2            138 	ld	-14 (ix),e
   00A5 DD 74 F1            139 	ld	-15 (ix),h
   00A8 DD 75 F0            140 	ld	-16 (ix),l
   00AB DD 6E F4            141 	ld	l,-12 (ix)
   00AE DD 66 F5            142 	ld	h,-11 (ix)
   00B1 6E                  143 	ld	l,(hl)
   00B2 7D                  144 	ld	a,l
   00B3 17                  145 	rla	
   00B4 9F                  146 	sbc	a,a
   00B5 67                  147 	ld	h,a
   00B6 7D                  148 	ld	a,l
   00B7 C6 D0               149 	add	a,#0xD0
   00B9 6F                  150 	ld	l,a
   00BA 7C                  151 	ld	a,h
   00BB CE FF               152 	adc	a,#0xFF
   00BD 67                  153 	ld	h,a
   00BE E5                  154 	push	hl
   00BF CDr00s00            155 	call	___sint2fs
   00C2 F1                  156 	pop	af
   00C3 44                  157 	ld	b,h
   00C4 4D                  158 	ld	c,l
   00C5 D5                  159 	push	de
   00C6 C5                  160 	push	bc
   00C7 DD 6E F2            161 	ld	l,-14 (ix)
   00CA DD 66 F3            162 	ld	h,-13 (ix)
   00CD E5                  163 	push	hl
   00CE DD 6E F0            164 	ld	l,-16 (ix)
   00D1 DD 66 F1            165 	ld	h,-15 (ix)
   00D4 E5                  166 	push	hl
   00D5 CDr00s00            167 	call	___fsadd
   00D8 F1                  168 	pop	af
   00D9 F1                  169 	pop	af
   00DA F1                  170 	pop	af
   00DB F1                  171 	pop	af
   00DC 44                  172 	ld	b,h
   00DD DD 75 FC            173 	ld	-4 (ix),l
   00E0 DD 70 FD            174 	ld	-3 (ix),b
   00E3 DD 73 FE            175 	ld	-2 (ix),e
   00E6 DD 72 FF            176 	ld	-1 (ix),d
                            177 ;../_atof.c:45: for (value=0.0; isdigit(*s); s++)
   00E9 DD 34 F4            178 	inc	-12 (ix)
   00EC C2r70s00            179 	jp	NZ,00121$
   00EF DD 34 F5            180 	inc	-11 (ix)
   00F2 C3r70s00            181 	jp	00121$
   00F5                     182 00149$:
   00F5 DD 7E F4            183 	ld	a,-12 (ix)
   00F8 DD 77 04            184 	ld	4 (ix),a
   00FB DD 7E F5            185 	ld	a,-11 (ix)
   00FE DD 77 05            186 	ld	5 (ix),a
                            187 ;../_atof.c:51: if (*s == '.')
   0101 DD 6E F4            188 	ld	l,-12 (ix)
   0104 DD 66 F5            189 	ld	h,-11 (ix)
   0107 7E                  190 	ld	a,(hl)
   0108 D6 2E               191 	sub	a,#0x2E
   010A C2rD6s01            192 	jp	NZ,00110$
                            193 ;../_atof.c:53: s++;
   010D DD 4E F4            194 	ld	c,-12 (ix)
   0110 DD 46 F5            195 	ld	b,-11 (ix)
   0113 03                  196 	inc	bc
                            197 ;../_atof.c:54: for (fraction=0.1; isdigit(*s); s++)
   0114 DD 36 F8 CD         198 	ld	-8 (ix),#0xCD
   0118 DD 36 F9 CC         199 	ld	-7 (ix),#0xCC
   011C DD 36 FA CC         200 	ld	-6 (ix),#0xCC
   0120 DD 36 FB 3D         201 	ld	-5 (ix),#0x3D
   0124 DD 71 F0            202 	ld	-16 (ix),c
   0127 DD 70 F1            203 	ld	-15 (ix),b
   012A                     204 00125$:
   012A DD 6E F0            205 	ld	l,-16 (ix)
   012D DD 66 F1            206 	ld	h,-15 (ix)
   0130 7E                  207 	ld	a,(hl)
   0131 F5                  208 	push	af
   0132 33                  209 	inc	sp
   0133 CDr00s00            210 	call	_isdigit
   0136 33                  211 	inc	sp
   0137 AF                  212 	xor	a,a
   0138 B5                  213 	or	a,l
   0139 CArCAs01            214 	jp	Z,00150$
                            215 ;../_atof.c:56: value+=(*s-'0')*fraction;
   013C DD 6E F0            216 	ld	l,-16 (ix)
   013F DD 66 F1            217 	ld	h,-15 (ix)
   0142 6E                  218 	ld	l,(hl)
   0143 7D                  219 	ld	a,l
   0144 17                  220 	rla	
   0145 9F                  221 	sbc	a,a
   0146 67                  222 	ld	h,a
   0147 7D                  223 	ld	a,l
   0148 C6 D0               224 	add	a,#0xD0
   014A 6F                  225 	ld	l,a
   014B 7C                  226 	ld	a,h
   014C CE FF               227 	adc	a,#0xFF
   014E 67                  228 	ld	h,a
   014F E5                  229 	push	hl
   0150 CDr00s00            230 	call	___sint2fs
   0153 F1                  231 	pop	af
   0154 42                  232 	ld	b,d
   0155 4B                  233 	ld	c,e
   0156 EB                  234 	ex	de,hl
   0157 DD 6E FA            235 	ld	l,-6 (ix)
   015A DD 66 FB            236 	ld	h,-5 (ix)
   015D E5                  237 	push	hl
   015E DD 6E F8            238 	ld	l,-8 (ix)
   0161 DD 66 F9            239 	ld	h,-7 (ix)
   0164 E5                  240 	push	hl
   0165 C5                  241 	push	bc
   0166 D5                  242 	push	de
   0167 CDr00s00            243 	call	___fsmul
   016A F1                  244 	pop	af
   016B F1                  245 	pop	af
   016C F1                  246 	pop	af
   016D F1                  247 	pop	af
   016E 44                  248 	ld	b,h
   016F 4D                  249 	ld	c,l
   0170 D5                  250 	push	de
   0171 C5                  251 	push	bc
   0172 DD 6E FE            252 	ld	l,-2 (ix)
   0175 DD 66 FF            253 	ld	h,-1 (ix)
   0178 E5                  254 	push	hl
   0179 DD 6E FC            255 	ld	l,-4 (ix)
   017C DD 66 FD            256 	ld	h,-3 (ix)
   017F E5                  257 	push	hl
   0180 CDr00s00            258 	call	___fsadd
   0183 F1                  259 	pop	af
   0184 F1                  260 	pop	af
   0185 F1                  261 	pop	af
   0186 F1                  262 	pop	af
   0187 44                  263 	ld	b,h
   0188 DD 75 FC            264 	ld	-4 (ix),l
   018B DD 70 FD            265 	ld	-3 (ix),b
   018E DD 73 FE            266 	ld	-2 (ix),e
   0191 DD 72 FF            267 	ld	-1 (ix),d
                            268 ;../_atof.c:57: fraction*=0.1;
   0194 DD 6E FA            269 	ld	l,-6 (ix)
   0197 DD 66 FB            270 	ld	h,-5 (ix)
   019A E5                  271 	push	hl
   019B DD 6E F8            272 	ld	l,-8 (ix)
   019E DD 66 F9            273 	ld	h,-7 (ix)
   01A1 E5                  274 	push	hl
   01A2 21 CC 3D            275 	ld	hl,#0x3DCC
   01A5 E5                  276 	push	hl
   01A6 21 CD CC            277 	ld	hl,#0xCCCD
   01A9 E5                  278 	push	hl
   01AA CDr00s00            279 	call	___fsmul
   01AD F1                  280 	pop	af
   01AE F1                  281 	pop	af
   01AF F1                  282 	pop	af
   01B0 F1                  283 	pop	af
   01B1 44                  284 	ld	b,h
   01B2 DD 75 F8            285 	ld	-8 (ix),l
   01B5 DD 70 F9            286 	ld	-7 (ix),b
   01B8 DD 73 FA            287 	ld	-6 (ix),e
   01BB DD 72 FB            288 	ld	-5 (ix),d
                            289 ;../_atof.c:54: for (fraction=0.1; isdigit(*s); s++)
   01BE DD 34 F0            290 	inc	-16 (ix)
   01C1 C2r2As01            291 	jp	NZ,00125$
   01C4 DD 34 F1            292 	inc	-15 (ix)
   01C7 C3r2As01            293 	jp	00125$
   01CA                     294 00150$:
   01CA DD 7E F0            295 	ld	a,-16 (ix)
   01CD DD 77 04            296 	ld	4 (ix),a
   01D0 DD 7E F1            297 	ld	a,-15 (ix)
   01D3 DD 77 05            298 	ld	5 (ix),a
   01D6                     299 00110$:
                            300 ;../_atof.c:62: if (toupper(*s)=='E')
   01D6 DD 4E 04            301 	ld	c,4 (ix)
   01D9 DD 46 05            302 	ld	b,5 (ix)
   01DC 0A                  303 	ld	a,(bc)
   01DD 6F                  304 	ld	l,a
   01DE C5                  305 	push	bc
   01DF 7D                  306 	ld	a,l
   01E0 F5                  307 	push	af
   01E1 33                  308 	inc	sp
   01E2 CDr00s00            309 	call	_islower
   01E5 33                  310 	inc	sp
   01E6 C1                  311 	pop	bc
   01E7 AF                  312 	xor	a,a
   01E8 B5                  313 	or	a,l
   01E9 28 06               314 	jr	Z,00131$
   01EB 0A                  315 	ld	a,(bc)
   01EC E6 DF               316 	and	a,#0xDF
   01EE 5F                  317 	ld	e,a
   01EF 18 02               318 	jr	00132$
   01F1                     319 00131$:
   01F1 0A                  320 	ld	a,(bc)
   01F2 5F                  321 	ld	e,a
   01F3                     322 00132$:
   01F3 7B                  323 	ld	a,e
   01F4 D6 45               324 	sub	a,#0x45
   01F6 C2r72s02            325 	jp	NZ,00118$
                            326 ;../_atof.c:64: s++;
   01F9 03                  327 	inc	bc
                            328 ;../_atof.c:65: iexp=(signed char)atoi(s);
   01FA C5                  329 	push	bc
   01FB CDr00s00            330 	call	_atoi
   01FE F1                  331 	pop	af
   01FF DD 75 F7            332 	ld	-9 (ix),l
                            333 ;../_atof.c:67: while(iexp!=0)
   0202                     334 00114$:
   0202 AF                  335 	xor	a,a
   0203 DD B6 F7            336 	or	a,-9 (ix)
   0206 CAr72s02            337 	jp	Z,00118$
                            338 ;../_atof.c:69: if(iexp<0)
   0209 DD CB F7 7E         339 	bit	7,-9 (ix)
   020D 28 32               340 	jr	Z,00112$
                            341 ;../_atof.c:71: value*=0.1;
   020F DD 6E FE            342 	ld	l,-2 (ix)
   0212 DD 66 FF            343 	ld	h,-1 (ix)
   0215 E5                  344 	push	hl
   0216 DD 6E FC            345 	ld	l,-4 (ix)
   0219 DD 66 FD            346 	ld	h,-3 (ix)
   021C E5                  347 	push	hl
   021D 21 CC 3D            348 	ld	hl,#0x3DCC
   0220 E5                  349 	push	hl
   0221 21 CD CC            350 	ld	hl,#0xCCCD
   0224 E5                  351 	push	hl
   0225 CDr00s00            352 	call	___fsmul
   0228 F1                  353 	pop	af
   0229 F1                  354 	pop	af
   022A F1                  355 	pop	af
   022B F1                  356 	pop	af
   022C 4A                  357 	ld	c,d
   022D 53                  358 	ld	d,e
   022E 5C                  359 	ld	e,h
   022F 45                  360 	ld	b,l
   0230 DD 70 FC            361 	ld	-4 (ix),b
   0233 DD 73 FD            362 	ld	-3 (ix),e
   0236 DD 72 FE            363 	ld	-2 (ix),d
   0239 DD 71 FF            364 	ld	-1 (ix),c
                            365 ;../_atof.c:72: iexp++;
   023C DD 34 F7            366 	inc	-9 (ix)
   023F 18 C1               367 	jr	00114$
   0241                     368 00112$:
                            369 ;../_atof.c:76: value*=10.0;
   0241 DD 6E FE            370 	ld	l,-2 (ix)
   0244 DD 66 FF            371 	ld	h,-1 (ix)
   0247 E5                  372 	push	hl
   0248 DD 6E FC            373 	ld	l,-4 (ix)
   024B DD 66 FD            374 	ld	h,-3 (ix)
   024E E5                  375 	push	hl
   024F 21 20 41            376 	ld	hl,#0x4120
   0252 E5                  377 	push	hl
   0253 21 00 00            378 	ld	hl,#0x0000
   0256 E5                  379 	push	hl
   0257 CDr00s00            380 	call	___fsmul
   025A F1                  381 	pop	af
   025B F1                  382 	pop	af
   025C F1                  383 	pop	af
   025D F1                  384 	pop	af
   025E 44                  385 	ld	b,h
   025F 4D                  386 	ld	c,l
   0260 DD 71 FC            387 	ld	-4 (ix),c
   0263 DD 70 FD            388 	ld	-3 (ix),b
   0266 DD 73 FE            389 	ld	-2 (ix),e
   0269 DD 72 FF            390 	ld	-1 (ix),d
                            391 ;../_atof.c:77: iexp--;
   026C DD 35 F7            392 	dec	-9 (ix)
   026F C3r02s02            393 	jp	00114$
   0272                     394 00118$:
                            395 ;../_atof.c:83: if(sign) value*=-1.0;
   0272 AF                  396 	xor	a,a
   0273 DD B6 F6            397 	or	a,-10 (ix)
   0276 28 1A               398 	jr	Z,00120$
   0278 DD 7E FF            399 	ld	a,-1 (ix)
   027B EE 80               400 	xor	a,#0x80
   027D DD 77 FF            401 	ld	-1 (ix),a
   0280 DD 7E FC            402 	ld	a,-4 (ix)
   0283 DD 77 FC            403 	ld	-4 (ix),a
   0286 DD 7E FD            404 	ld	a,-3 (ix)
   0289 DD 77 FD            405 	ld	-3 (ix),a
   028C DD 7E FE            406 	ld	a,-2 (ix)
   028F DD 77 FE            407 	ld	-2 (ix),a
   0292                     408 00120$:
                            409 ;../_atof.c:84: return (value);
   0292 DD 6E FC            410 	ld	l,-4 (ix)
   0295 DD 66 FD            411 	ld	h,-3 (ix)
   0298 DD 5E FE            412 	ld	e,-2 (ix)
   029B DD 56 FF            413 	ld	d,-1 (ix)
   029E DD F9               414 	ld	sp,ix
   02A0 DD E1               415 	pop	ix
   02A2 C9                  416 	ret
   02A3                     417 _atof_end::
                            418 	.area _CODE
                            419 	.area _CABS
