                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 2.9.4 #5595 (Oct 23 2013) (Mac OS X ppc)
                              4 ; This file was generated Wed Oct 23 12:26:08 2013
                              5 ;--------------------------------------------------------
                              6 	.module _atol
                              7 	.optsdcc -mz80
                              8 	
                              9 ;--------------------------------------------------------
                             10 ; Public variables in this module
                             11 ;--------------------------------------------------------
                             12 	.globl _atol
                             13 ;--------------------------------------------------------
                             14 ; special function registers
                             15 ;--------------------------------------------------------
                             16 ;--------------------------------------------------------
                             17 ;  ram data
                             18 ;--------------------------------------------------------
                             19 	.area _DATA
                             20 ;--------------------------------------------------------
                             21 ; overlayable items in  ram 
                             22 ;--------------------------------------------------------
                             23 	.area _OVERLAY
                             24 ;--------------------------------------------------------
                             25 ; external initialized ram data
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; global & static initialisations
                             29 ;--------------------------------------------------------
                             30 	.area _HOME
                             31 	.area _GSINIT
                             32 	.area _GSFINAL
                             33 	.area _GSINIT
                             34 ;--------------------------------------------------------
                             35 ; Home
                             36 ;--------------------------------------------------------
                             37 	.area _HOME
                             38 	.area _HOME
                             39 ;--------------------------------------------------------
                             40 ; code
                             41 ;--------------------------------------------------------
                             42 	.area _CODE
                             43 ;../_atol.c:25: long atol(char * s)
                             44 ;	---------------------------------
                             45 ; Function atol
                             46 ; ---------------------------------
   0000                      47 _atol_start::
   0000                      48 _atol:
   0000 DD E5                49 	push	ix
   0002 DD 21 00 00          50 	ld	ix,#0
   0006 DD 39                51 	add	ix,sp
   0008 21 F5 FF             52 	ld	hl,#-11
   000B 39                   53 	add	hl,sp
   000C F9                   54 	ld	sp,hl
                             55 ;../_atol.c:27: register long rv=0; 
   000D AF                   56 	xor	a,a
   000E DD 77 FC             57 	ld	-4 (ix),a
   0011 DD 77 FD             58 	ld	-3 (ix),a
   0014 DD 77 FE             59 	ld	-2 (ix),a
   0017 DD 77 FF             60 	ld	-1 (ix),a
                             61 ;../_atol.c:31: while (*s) {
   001A DD 4E 04             62 	ld	c,4 (ix)
   001D DD 46 05             63 	ld	b,5 (ix)
   0020                      64 00107$:
   0020 0A                   65 	ld	a,(bc)
   0021 6F                   66 	ld	l,a
   0022 B7                   67 	or	a,a
   0023 28 1A                68 	jr	Z,00133$
                             69 ;../_atol.c:32: if (*s <= '9' && *s >= '0')
   0025 3E 39                70 	ld	a,#0x39
   0027 95                   71 	sub	a,l
   0028 FAr31s00             72 	jp	M,00102$
   002B 7D                   73 	ld	a,l
   002C D6 30                74 	sub	a,#0x30
   002E F2r3Fs00             75 	jp	P,00133$
                             76 ;../_atol.c:33: break;
   0031                      77 00102$:
                             78 ;../_atol.c:34: if (*s == '-' || *s == '+') 
   0031 0A                   79 	ld	a,(bc)
   0032 6F                   80 	ld	l,a
   0033 D6 2D                81 	sub	a,#0x2D
   0035 28 08                82 	jr	Z,00133$
   0037 7D                   83 	ld	a,l
   0038 D6 2B                84 	sub	a,#0x2B
   003A 28 03                85 	jr	Z,00133$
                             86 ;../_atol.c:36: s++;
   003C 03                   87 	inc	bc
   003D 18 E1                88 	jr	00107$
   003F                      89 00133$:
   003F DD 71 04             90 	ld	4 (ix),c
   0042 DD 70 05             91 	ld	5 (ix),b
                             92 ;../_atol.c:39: sign = (*s == '-');
   0045 59                   93 	ld	e,c
   0046 50                   94 	ld	d,b
   0047 0A                   95 	ld	a,(bc)
   0048 6F                   96 	ld	l,a
   0049 D6 2D                97 	sub	a,#0x2D
   004B 20 04                98 	jr	NZ,00137$
   004D 3E 01                99 	ld	a,#0x01
   004F 18 01               100 	jr	00138$
   0051                     101 00137$:
   0051 AF                  102 	xor	a,a
   0052                     103 00138$:
   0052 4F                  104 	ld	c,a
   0053 DD 71 FB            105 	ld	-5 (ix),c
                            106 ;../_atol.c:40: if (*s == '-' || *s == '+') s++;
   0056 AF                  107 	xor	a,a
   0057 B1                  108 	or	a,c
   0058 20 05               109 	jr	NZ,00110$
   005A 7D                  110 	ld	a,l
   005B D6 2B               111 	sub	a,#0x2B
   005D 20 0A               112 	jr	NZ,00131$
   005F                     113 00110$:
   005F 21 01 00            114 	ld	hl,#0x0001
   0062 19                  115 	add	hl,de
   0063 DD 75 04            116 	ld	4 (ix),l
   0066 DD 74 05            117 	ld	5 (ix),h
                            118 ;../_atol.c:42: while (*s && *s >= '0' && *s <= '9') {
   0069                     119 00131$:
   0069 DD 7E 04            120 	ld	a,4 (ix)
   006C DD 77 F9            121 	ld	-7 (ix),a
   006F DD 7E 05            122 	ld	a,5 (ix)
   0072 DD 77 FA            123 	ld	-6 (ix),a
   0075                     124 00115$:
   0075 DD 6E F9            125 	ld	l,-7 (ix)
   0078 DD 66 FA            126 	ld	h,-6 (ix)
   007B 4E                  127 	ld	c,(hl)
   007C AF                  128 	xor	a,a
   007D B1                  129 	or	a,c
   007E CArF8s00            130 	jp	Z,00117$
   0081 79                  131 	ld	a,c
   0082 D6 30               132 	sub	a,#0x30
   0084 FArF8s00            133 	jp	M,00117$
   0087 3E 39               134 	ld	a,#0x39
   0089 91                  135 	sub	a,c
   008A FArF8s00            136 	jp	M,00117$
                            137 ;../_atol.c:43: rv = (rv * 10) + (*s - '0');
   008D C5                  138 	push	bc
   008E DD 6E FE            139 	ld	l,-2 (ix)
   0091 DD 66 FF            140 	ld	h,-1 (ix)
   0094 E5                  141 	push	hl
   0095 DD 6E FC            142 	ld	l,-4 (ix)
   0098 DD 66 FD            143 	ld	h,-3 (ix)
   009B E5                  144 	push	hl
   009C 21 00 00            145 	ld	hl,#0x0000
   009F E5                  146 	push	hl
   00A0 21 0A 00            147 	ld	hl,#0x000A
   00A3 E5                  148 	push	hl
   00A4 CDr00s00            149 	call	__mullong_rrx_s
   00A7 F1                  150 	pop	af
   00A8 F1                  151 	pop	af
   00A9 F1                  152 	pop	af
   00AA F1                  153 	pop	af
   00AB DD 72 F8            154 	ld	-8 (ix),d
   00AE DD 73 F7            155 	ld	-9 (ix),e
   00B1 DD 74 F6            156 	ld	-10 (ix),h
   00B4 DD 75 F5            157 	ld	-11 (ix),l
   00B7 C1                  158 	pop	bc
   00B8 79                  159 	ld	a,c
   00B9 6F                  160 	ld	l,a
   00BA 17                  161 	rla	
   00BB 9F                  162 	sbc	a,a
   00BC 67                  163 	ld	h,a
   00BD 7D                  164 	ld	a,l
   00BE C6 D0               165 	add	a,#0xD0
   00C0 6F                  166 	ld	l,a
   00C1 7C                  167 	ld	a,h
   00C2 CE FF               168 	adc	a,#0xFF
   00C4 67                  169 	ld	h,a
   00C5 4D                  170 	ld	c,l
   00C6 47                  171 	ld	b,a
   00C7 7C                  172 	ld	a,h
   00C8 17                  173 	rla	
   00C9 9F                  174 	sbc	a,a
   00CA 5F                  175 	ld	e,a
   00CB 57                  176 	ld	d,a
   00CC DD 7E F5            177 	ld	a,-11 (ix)
   00CF 81                  178 	add	a,c
   00D0 4F                  179 	ld	c,a
   00D1 DD 7E F6            180 	ld	a,-10 (ix)
   00D4 88                  181 	adc	a,b
   00D5 47                  182 	ld	b,a
   00D6 DD 7E F7            183 	ld	a,-9 (ix)
   00D9 8B                  184 	adc	a,e
   00DA 5F                  185 	ld	e,a
   00DB DD 7E F8            186 	ld	a,-8 (ix)
   00DE 8A                  187 	adc	a,d
   00DF 57                  188 	ld	d,a
   00E0 DD 71 FC            189 	ld	-4 (ix),c
   00E3 DD 70 FD            190 	ld	-3 (ix),b
   00E6 DD 73 FE            191 	ld	-2 (ix),e
   00E9 DD 72 FF            192 	ld	-1 (ix),d
                            193 ;../_atol.c:44: s++;
   00EC DD 34 F9            194 	inc	-7 (ix)
   00EF C2r75s00            195 	jp	NZ,00115$
   00F2 DD 34 FA            196 	inc	-6 (ix)
   00F5 C3r75s00            197 	jp	00115$
   00F8                     198 00117$:
                            199 ;../_atol.c:47: return (sign ? -rv : rv);
   00F8 AF                  200 	xor	a,a
   00F9 DD B6 FB            201 	or	a,-5 (ix)
   00FC 28 19               202 	jr	Z,00120$
   00FE AF                  203 	xor	a,a
   00FF DD 9E FC            204 	sbc	a,-4 (ix)
   0102 4F                  205 	ld	c,a
   0103 3E 00               206 	ld	a,#0x00
   0105 DD 9E FD            207 	sbc	a,-3 (ix)
   0108 47                  208 	ld	b,a
   0109 3E 00               209 	ld	a,#0x00
   010B DD 9E FE            210 	sbc	a,-2 (ix)
   010E 5F                  211 	ld	e,a
   010F 3E 00               212 	ld	a,#0x00
   0111 DD 9E FF            213 	sbc	a,-1 (ix)
   0114 57                  214 	ld	d,a
   0115 18 0C               215 	jr	00121$
   0117                     216 00120$:
   0117 DD 4E FC            217 	ld	c,-4 (ix)
   011A DD 46 FD            218 	ld	b,-3 (ix)
   011D DD 5E FE            219 	ld	e,-2 (ix)
   0120 DD 56 FF            220 	ld	d,-1 (ix)
   0123                     221 00121$:
   0123 69                  222 	ld	l,c
   0124 60                  223 	ld	h,b
   0125 DD F9               224 	ld	sp,ix
   0127 DD E1               225 	pop	ix
   0129 C9                  226 	ret
   012A                     227 _atol_end::
                            228 	.area _CODE
                            229 	.area _CABS
